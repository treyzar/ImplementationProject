У меня уже есть существующий проект:
- Backend: Django 4.x + Django REST Framework на Python 3.10.
- Frontend: React 18 + TypeScript, Tailwind CSS, React Router.
- В проект уже интегрирован модуль "Конструктор документов" (Document Builder): есть страница на фронтенде и базовый backend (приложение documents или аналогичное).

Твоя задача:
НЕ создавать всё с нуля, а АККУРАТНО ДОРАБОТАТЬ существующую реализацию конструктора документов:
- Освежить UI/UX (современный свежий дизайн).
- Перевести страницу на shadcn/ui компоненты (только из разрешённого списка, см. ниже).
- Оформить всё в оранжевой палитре, похожей на фирменный стиль компании Бреслер.
- Добавить инструменты выравнивания блоков как в Figma (по краям, по центру, равные отступы).
- ПОЛНОСТЬЮ УБРАТЬ соединения по WebSocket (и на фронтенде, и на backend), переведя логику на обычные HTTP-запросы.
- НЕ добавлять никаких лишних backend-файлов и новых Django-приложений. Только то, что реально нужно.
- В конце дать два уровня инструкций:
  1) технический пошаговый гайд по интеграции для разработчиков;
  2) простой понятный гид для обычных пользователей, которые не очень уверенно пользуются компьютером.

ОЧЕНЬ ВАЖНЫЕ ПРАВИЛА:
1. НЕ создавай новых Django-приложений.
2. НЕ создавай лишних python-файлов на backend. Работай ТОЛЬКО с теми файлами, которые уже существуют и реально нужны (например, существующие models.py, serializers.py, views.py, urls.py в приложении documents).
3. Если задачу можно решить ТОЛЬКО на фронтенде — backend не трогай.
4. ПОЛНЫЙ ЗАПРЕТ на заглушки: нельзя использовать `pass`, `...`, `# TODO`, комментарии вида "здесь будет логика" и похожие вещи.
5. Всё, что ты предлагаешь, должно быть готовым к вставке в живой проект без псевдокода и плейсхолдеров.

==================================================
0. КРАТКИЙ ОБЗОР ТЕКУЩЕЙ СИСТЕМЫ (принять как данность)
==================================================

Предположи, что сейчас уже есть:

- Django-backend с REST API для:
  - шаблонов документов (Document Templates),
  - загрузки файлов (DOCX/PDF),
  - хранения JSON-схемы документа.

- Фронтенд-страница конструктора документов, которая:
  - общается с backend через REST API (возможно, частично ещё через WebSocket);
  - имеет холст (canvas) для размещения блоков;
  - позволяет добавлять хотя бы текстовые блоки и сохранять шаблон.

Тебе НЕ нужно заново описывать модели и API с нуля. Вместо этого:
- при необходимости можешь предложить небольшие изменения в схемах данных (например, в JSON-структуре шаблона) и показать, как аккуратно доработать serializers/views;
- основное внимание — на доработку фронтенда, UI/UX, shadcn/ui и удаление WebSocket.

==================================================
1. ДИЗАЙН: ОРАНЖЕВАЯ ПАЛИТРА В СТИЛЕ БРЕСЛЕР
==================================================

Сделай интерфейс конструктора документов в современном свежем дизайне, с акцентом на оранжевые оттенки, похожие на фирменный стиль компании Бреслер.

Используй следующую палитру (можно оформить как расширение tailwind.config.js):

- Основной акцент (primary):   #E73F0C
- Тёмный акцент:               #C2360A
- Светлый акцент:              #FFE1D4
- Тёмный текст:                #26292A
- Вторичный текст:             #4A4D50
- Светлый фон:                 #F7F8F8
- Поверхности (карты, панели): #FFFFFF с мягкими тенями

Требования к стилю:
- Чёткая визуальная иерархия: крупный заголовок, выразительный toolbar, аккуратные панели слева и справа.
- Скругления карточек и панелей около 10–12px.
- Акцентный оранжевый цвет использовать для:
  - основных кнопок,
  - иконок состояния (выделение, активный элемент),
  - элементов управления zoom,
  - активных табов и важных акцентов.
- Основной фон — светлый, оранжевый только для важных акцентов, а не для больших заливок.

Если нужно, предложи конкретный фрагмент tailwind.config.js с добавлением этих цветов, без абстрактных плейсхолдеров.

==================================================
2. SHADCN/UI: КОМПОНЕНТЫ И ИНТЕГРАЦИЯ
==================================================

В проект используется shadcn/ui. НЕ нужно описывать установку с нуля, но в конце добавь краткий гайд, как убедиться, что все необходимые компоненты добавлены.

Используй ТОЛЬКО эти компоненты shadcn/ui (считай, что они либо уже есть, либо их можно добавить):

- Button (`@/components/ui/button`)
- Card (`@/components/ui/card`)
- ScrollArea (`@/components/ui/scroll-area`)
- Tabs (`@/components/ui/tabs`)
- Dialog (`@/components/ui/dialog`)
- DropdownMenu (`@/components/ui/dropdown-menu`)
- Popover (`@/components/ui/popover`)
- Tooltip (`@/components/ui/tooltip`)
- Input (`@/components/ui/input`)
- Textarea (`@/components/ui/textarea`)
- Label (`@/components/ui/label`)
- Select (`@/components/ui/select`)
- Slider (`@/components/ui/slider`)
- Separator (`@/components/ui/separator`)
- Toggle или ToggleGroup (если нужен переключатель режима)
- Switch (`@/components/ui/switch`) при необходимости

ТРЕБОВАНИЯ:

1) Перепроектируй страницу конструктора документов так, чтобы:
   - ToolBar, панели и холст были собраны из этих компонентов.
   - Не использовать самописные кнопки, если можно задействовать Button из shadcn.
   - Панели оформлялись через Card, ScrollArea, Tabs, Dialog и другие указанные компоненты.

2) В своём ответе:
   - давай полный готовый код компонентов (без `...`), с корректными импортами shadcn/ui;
   - используй путь импортов `@/components/ui/...`.

3) В отдельном разделе "Интеграция shadcn/ui":
   - перечисли, какие компоненты нужно добавить командой `npx shadcn-ui add`, если их ещё нет;
   - покажи пример импортов.

==================================================
3. ВЫРАВНИВАНИЕ БЛОКОВ КАК В FIGMA
==================================================

Нужно реализовать систему выравнивания блоков на холсте, похожую на Figma.

Функциональность:

1. Множественное выделение:
   - возможность выделить несколько блоков (например, через Shift+клик или прямоугольное выделение);
   - хранить массив `selectedBlockIds` в состоянии.

2. Кнопки выравнивания в toolbar:
   - Align left
   - Align center (по горизонтали)
   - Align right
   - Align top
   - Align middle (по вертикали)
   - Align bottom
   - Distribute horizontally
   - Distribute vertically

3. Поведение:
   - Выравнивание основано либо на рамке выделения (общий bounding box), либо на первом выбранном элементе — выбери стратегию и явно опиши её в комментариях.
   - Напиши чистые функции, например:
     - `alignBlocks(blocks, selectedIds, mode)`
     - `distributeBlocks(blocks, selectedIds, direction)`
   - Функции должны возвращать НОВЫЙ массив блоков, не мутируя исходный.
   - Используй поля `x`, `y`, `width`, `height` блоков.

4. UI:
   - В toolbar добавь группу кнопок выравнивания (Button или ToggleGroup из shadcn).
   - Можно использовать простые иконки (например, свои SVG-компоненты или текстовые иконки), но без сторонних icon-библиотек, если их нет в проекте.

5. Undo/redo:
   - Обнови логику истории так, чтобы операции выравнивания сохранялись в undo/redo стеке.

Всё выравнивание реализуется на фронтенде, без изменения backend.

==================================================
4. ПЕРЕРАБОТКА СТРАНИЦЫ КОНСТРУКТОРА (FRONTEND)
==================================================

У тебя уже есть страница Document Builder. Нужно её переработать, НЕ ломая контракт с backend.

Сделай следующее:

1. Структура страницы:
   - Верхняя панель (Toolbar):
     - текстовое поле названия шаблона;
     - кнопки:
       - Сохранить шаблон,
       - Загрузить шаблон (селект/дропдаун),
       - Загрузить файл (DOCX/PDF),
       - Предпросмотр,
       - Undo,
       - Redo,
       - Zoom минус/плюс,
       - Группа кнопок выравнивания (см. выше).
   - Левая панель (Sidebar):
     - вкладка с библиотекой блоков (Text, Table, Image, Signature, Rectangle и т.п.);
     - вкладка с загруженными файлами (список Source Files, получаемый из API).
   - Центральный холст:
     - область формата A4 или похожая по пропорциям;
     - блоки с абсолютным позиционированием и визуальным учётом zoom;
     - подсветка выбранных блоков.
   - Правая панель (Inspector):
     - свойства выбранного блока:
       - координаты (x, y),
       - ширина, высота,
       - текст/контент,
       - параметры шрифта (размер, жирность, выравнивание),
       - параметры рамки и т.п.;
     - базовые настройки документа (формат, отступы).

2. Лейаут и компоненты:
   - Раздели всё на компоненты:
     - DocumentBuilderPage (общая страница),
     - Toolbar,
     - DocumentCanvas,
     - SidebarBlocks,
     - SidebarFiles,
     - InspectorPanel.
   - Оформи панели с помощью Card и ScrollArea, toolbar с использованием Button, DropdownMenu и других подходящих компонентов из shadcn/ui.
   - Используй Tailwind для сетки и позиционирования, и шад-сomponents для интерактивных элементов.

3. Состояние:
   - Обеспечь:
     - хранение списка блоков;
     - выбранный блок и множественный выбор;
     - zoom;
     - undo/redo стек;
     - список шаблонов и файлов;
     - загрузку/сохранение через существующий API.

4. Код:
   - Дай ПОЛНЫЙ обновлённый код ключевых компонентов:
     - DocumentBuilderPage.tsx,
     - Toolbar,
     - DocumentCanvas,
     - SidebarBlocks,
     - SidebarFiles,
     - InspectorPanel,
     - вспомогательные хуки/утилиты для undo/redo и выравнивания блоков.
   - Не используй недописанный JSX и псевдокомпоненты.

==================================================
5. BACKEND: МИНИМАЛЬНЫЕ ДОРАБОТКИ (ТОЛЬКО ЕСЛИ НУЖНО)
==================================================

Правила:

1. НЕ создавай новых Django-приложений.
2. НЕ создавай новых backend-файлов просто ради красоты. Можно вносить изменения ТОЛЬКО в:
   - существующее приложение документов (например, documents/models.py, documents/serializers.py, documents/views.py, documents/urls.py),
   - другие уже существующие файлы, если это действительно необходимо.

3. Допускаются только минимальные изменения:
   - добавить поле к модели шаблона (если нужно хранить новую настройку документа),
   - слегка скорректировать сериализатор или view для поддержки новых полей,
   - оптимизировать существующий endpoint.

4. Если в текущем проекте есть WebSocket-соединения, связанные с конструктором документов (Django Channels, socket.io, любые библиотеки реального времени):
   - ОПИШИ, где именно они используются (фрагменты кода до изменений);
   - покажи, как ПОЛНОСТЬЮ удалить или отключить их:
     - убрать маршруты WebSocket;
     - убрать зависимость от consumer/handler;
     - заменить связанные части фронтенда на обычные REST-вызовы.
   - Предложи безопасную стратегию переключения на REST:
     - обновление данных по кнопке «Обновить»;
     - или периодическое опрашивание (polling) через таймер;
     - или работа только с локальным состоянием и сохранением по нажатию кнопки.

5. Если изменения backend всё-таки нужны:
   - покажи конкретные патчи: старый фрагмент кода и новый фрагмент;
   - укажи путь к файлу;
   - если меняется модель — укажи необходимые команды миграций.

6. Если по итогу для новых функций достаточно доработок только на фронтенде — явно напиши, что backend менять не нужно.

==================================================
6. УДАЛЕНИЕ WEBSOCKET-СОЕДИНЕНИЙ
==================================================

Отдельная задача: если в текущей реализации конструктора документов используется WebSocket (для живых обновлений, совместного редактирования или автообновления данных):

1. Найди и опиши:
   - какие файлы фронтенда подписываются на WebSocket;
   - какие backend-компоненты отвечают за WebSocket (Channels routing, consumers, socket-серверы и т.п.).

2. Удали / отключи WebSocket-логику:

   На фронтенде:
   - убери создание WebSocket-подключений;
   - убери обработчики сообщений от WebSocket;
   - вместо этого:
     - реализуй обновление данных через REST API;
     - при необходимости добавь:
       - кнопку "Обновить" в интерфейсе;
       - или простой механизм периодического обновления через setInterval (с аккуратной очисткой).

   На backend:
   - если используются Django Channels:
     - убери маршруты channels, связанные с конструктором документов;
     - убери consumers, если они больше не используются;
     - если есть отдельные настройки ASGI/Channels только для этого функционала — покажи, как их аккуратно отключить.
   - Если используются другие библиотеки WebSocket — покажи, какие части кода нужно удалить или закомментировать, и чем их заменить.

3. Важно:
   - не ломай остальные части проекта, которые могут использовать WebSocket для других задач. Фокус только на том, что относится к конструктору документов.
   - В конце опиши, как проверить, что WebSocket точно не используется, а конструктор продолжает работать через обычный HTTP.

==================================================
7. ФОРМАТ ОТВЕТА
==================================================

Разбей ответ на следующие крупные разделы:

1) "Обновлённый дизайн и структура конструктора"
   - Кратко опиши визуальную концепцию, layout, использование оранжевой палитры и shadcn/ui.

2) "Код фронтенда"
   - ПОЛНЫЙ код обновлённой страницы конструктора и ключевых компонентов:
     - DocumentBuilderPage,
     - Toolbar,
     - DocumentCanvas,
     - SidebarBlocks,
     - SidebarFiles,
     - InspectorPanel,
     - функции выравнивания и undo/redo.
   - Везде показывай корректные импорты, включая shadcn/ui.

3) "Код backend (если изменения необходимы)"
   - Конкретные изменения в существующих файлах (с путями).
   - Патчи для удаления WebSocket, если они есть.
   - Команды миграций, если изменялись модели.

4) "Инструкция по интеграции для разработчиков"
   - Пошаговый технический гайд:

   4.1. Frontend:
        - какие файлы нужно создать/обновить (с путями вроде `src/pages/DocumentBuilderPage.tsx`, `src/components/document-builder/...`);
        - какие команды `npx shadcn-ui add ...` нужно выполнить для добавления недостающих компонентов;
        - как обновить tailwind.config.js для добавления оранжевой палитры;
        - как обновить роут `"/documents/builder"` в React Router;
        - как убедиться, что WebSocket больше не используется на фронте.

   4.2. Backend:
        - какие файлы и фрагменты кода нужно изменить (с путями);
        - какие команды миграций выполнить (`python manage.py makemigrations`, `python manage.py migrate`), если менялись модели;
        - какие настройки Channels/WebSocket нужно убрать, если они были;
        - нужны ли дополнительные зависимости или, наоборот, можно удалить библиотеки для WebSocket.

   4.3. Проверка:
        - пошаговый сценарий проверки:
          - открыть страницу конструктора;
          - создать новый шаблон;
          - добавить блоки и выровнять их;
          - сохранить шаблон;
          - загрузить файл DOCX/PDF;
          - открыть parsed_content;
          - убедиться, что всё работает через обычные HTTP-запросы, без WebSocket.

5) "Простой пользовательский гид для обычных пользователей"
   - Отдельный раздел, написанный простым человеческим языком, без технических терминов.
   - Объясни, шаг за шагом:
     - как открыть конструктор в браузере (какую кнопку нажать в меню, какой пункт выбрать);
     - как создать новый документ;
     - как добавить текстовый блок;
     - как переместить блок мышкой;
     - как выровнять блоки по краю и по центру с помощью понятных кнопок (можно словами вроде "кнопка с иконкой трёх прямоугольников по левому краю");
     - как сохранить шаблон;
     - как загрузить файл и посмотреть его содержимое;
     - как вернуться к уже сохранённому документу.
   - Пиши так, чтобы человек, не очень уверенно работающий с компьютером, смог повторить шаги:
     - короткие предложения,
     - нумерованные шаги,
     - минимум технического жаргона,
     - можно описывать вид кнопок ("оранжевая кнопка справа вверху", "левая панель с блоками" и так далее).

ОСОБО: НИКАКИХ ПЛЕЙСХОЛДЕРОВ И ЗАГЛУШЕК. Все примеры кода должны быть полностью рабочими, с реальными импортами, типами и логикой.
